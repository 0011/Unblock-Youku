<!doctype html>

<script>
    chrome.webRequest.onBeforeSendHeaders.addListener(
    // callback function
    function(details) {
        details.requestHeaders.push({
            name: "X-Forwarded-For", 
            value: "166.111.8.29"
        });
        return {requestHeaders: details.requestHeaders};
    },

    // url filters
    {
        urls: [
            "http://*.youku.com/*",
            "http://*.tudou.com/*"
        ]
    },

    // extraInfoSpec
    // the request is blocked until the callback function returns
    ["requestHeaders", "blocking"]);
</script>
